# Платформа-торговой сети электроники

## Tech Stack

- python
- django
- drf
- postgresql

Сеть представляет собой иерархическую структуру из трех уровней:

завод;
розничная сеть;
индивидуальный предприниматель.

Каждое звено сети ссылается только на одного поставщика оборудования, кроме уровня 0 (завод тоже имеет поставщиков,
но в контексте торговой сети они не рассматриваются)
Уровень узла сети определяется в момент создания на основе предыдущего узла сети указанного в качестве поставщика.
Если поставщик в момент создания не указывается, уровень - 0. Если уровень поставщика > 0 то уровень узла - 2, если 
уровень поставщика = 0 значит уровень узла 1. 

Каждое звено сети обладает следующими элементами:
- Название.
- Контакты:
- - email,
- - страна,
- - город,
- - улица,
- - номер дома.
- Продукты:
- - название,
- - модель,
- - дата выхода продукта на рынок.
- Поставщик (предыдущий по иерархии объект сети).
- Задолженность перед поставщиком в денежном выражении с точностью до копеек. 
- Время создания (заполняется автоматически при создании).

В админку добавлена ссылка на поставщика, филтрация по названию города, admin action очищающий задолженность перед поставщиком.
Обновление полей поставщик и задолженность перед поставщиком запрещена.
Добавлена возможность фильтрации объектов по определенной стране.
Доступ к api возможен только для активных пользователей

сборка и запуск
```sh
docker compose -f docker-compose.prod.yml up -d --build
```
скопировать статические файлы в staticfiles
```
docker compose -f docker-compose.prod.yml exec web python manage.py collectstatic --no-input --clear
```
накатить миграции на бд
```
docker compose -f docker-compose.prod.yml exec web python manage.py migrate --noinput
```
для создания superuser
```sh
docker compose -f docker-compose.prod.yml exec web python manage.py create_su
```
для остановки сервиса
```sh
docker compose -f docker-compose.prod.yml down -v
```
Тестирование
эндпониты api покрыты тестами

приложение доступно по адресу localhost:1337
